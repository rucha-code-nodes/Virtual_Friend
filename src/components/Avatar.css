/* src/components/Avatar.css */

.avatar-container {
  position: relative;
  /* Fixed size for a perfect circle */
  width: 220px;
  height: 220px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transition: transform 0.5s ease, box-shadow 0.5s ease;
  
  /* --- MODERNIZATION MAGIC --- */
  border-radius: 50%; /* 1. Circle shape */
  overflow: hidden;   /* Clips the image to the circle */
  
  /* 2. Glassy Border Ring */
  border: 3px solid rgba(255, 255, 255, 0.1);
  
  /* 3. Depth: Inner shadow makes it look sunken/real */
  box-shadow: 
    inset 0 0 20px rgba(0,0,0,0.5), /* Inner depth */
    0 10px 30px rgba(0,0,0,0.3);    /* Outer drop shadow */
    
  /* Default Idle Animation applied to the whole container */
  animation: breatheIdle 4s infinite ease-in-out;
}

/* THE ATMOSPHERIC OVERLAY
   This is the key to realism. It puts a dark blue tint over the image
   so it looks lit by the environment, not by a studio flash.
*/
.avatar-container::after {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    /* Gradient from subtle top light to dark bottom shadows, matching app theme */
    background: linear-gradient(to bottom, rgba(102, 126, 234, 0.1) 0%, rgba(26, 27, 75, 0.7) 100%);
    z-index: 3; /* Sits on top of image */
    pointer-events: none;
}

/* The Image Itself */
.avatar-image {
  width: 100%;
  height: 100%;
  /* IMPORTANT: 'cover' ensures the image fills the circle without stretching */
  object-fit: cover; 
  z-index: 2;
  /* Slight scale to prevent pixel-peeping at edges during animation */
  transform: scale(1.01);
}

/* BACKGROUND GLOW (Aura) - Adjusted for circle */
.avatar-aura {
  position: absolute;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: 220px; height: 220px; /* Match container size */
  border-radius: 50%;
  z-index: 1;
  transition: all 0.5s ease;
  /* Default nice purple glow */
  box-shadow: 0 0 60px 20px rgba(118, 75, 162, 0.3);
  opacity: 0.8;
}

/* --- STATES (Applied to container now) --- */

/* 1. SPEAKING STATE */
.avatar-container.speaking {
  animation: talkPulse 0.8s infinite alternate ease-in-out;
  border-color: rgba(196, 245, 238, 0.5); /* Teal border */
}
.avatar-container.speaking .avatar-aura {
  /* Intense Teal/Blue Glow */
  box-shadow: 0 0 80px 30px rgba(118, 225, 245, 0.5);
}

/* 2. LISTENING STATE */
.avatar-container.listening {
  transform: scale(1.05); /* Gentle lean in */
  border-color: rgba(253, 238, 152, 0.5); /* Yellow border */
}
.avatar-container.listening .avatar-aura {
  /* Warm Yellow Glow */
  box-shadow: 0 0 80px 30px rgba(253, 238, 152, 0.4);
}

/* --- ANIMATIONS --- */
@keyframes breatheIdle {
  0%, 100% { transform: translateY(0) scale(1); }
  50% { transform: translateY(-5px) scale(1.02); }
}

/* A more subtle, organic talking animation */
@keyframes talkPulse {
  0% { transform: scale(1); box-shadow: inset 0 0 20px rgba(0,0,0,0.5), 0 10px 30px rgba(0,0,0,0.3); }
  100% { transform: scale(1.03); box-shadow: inset 0 0 30px rgba(0,0,0,0.6), 0 15px 40px rgba(118, 225, 245, 0.4); }
}

/* STATUS BADGE (Kept the same) */
.avatar-status-badge {
  position: absolute;
  bottom: -15px; /* Overlap bottom edge */
  z-index: 10;
  background: rgba(26, 27, 75, 0.8); /* Darker background */
  backdrop-filter: blur(8px);
  padding: 8px 16px;
  border-radius: 20px;
  color: white;
  font-size: 0.8rem;
  display: flex;
  align-items: center;
  gap: 8px;
  border: 1px solid rgba(255,255,255,0.1);
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

.status-dot { width: 8px; height: 8px; border-radius: 50%; background: #ccc; }
.status-dot.speak { background: #C4F5EE; box-shadow: 0 0 10px #C4F5EE; }
.status-dot.listen { background: #FDEE98; box-shadow: 0 0 10px #FDEE98; }
.status-dot.idle { background: #A0A1C5; }


